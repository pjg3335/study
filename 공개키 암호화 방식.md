> 아래의 글은 팩트 50% 뇌피셜 50%인 글임  
> 자세한 것은 직접 검색해 보고 대충 원리만 파악할 것  

<br/>

## 2가지 유형의 공개키 암호화 방식
2가지 유형의 공개키 암호화 방식을 본다.  
1. A, B가 `비밀스러운 통신`을 하기 위한 공개키 암호화
2. `인증`을 하는 공개키  
<br/>

## 비밀스러운 통신을 하는 공개키 암호화
비밀스러운 통신은 **둘만이 공유하는 비밀**이 필요하다.  
예를들어 A, B가 `3`이라는 값을 비밀스럽게 공유한다면 메시지  수신자는 `"ABC"`를 보낼때 각 자리에 `+3`을 하여`"DEF"`로 보내고 받는쪽은 `-3`을 하여 `"ABC"`를 볼 수 있다.  

### 둘만이 공유하는 비밀을 갖는 방법
어떻게 둘만이 공유하는 비밀을 가질 수 있는지 생각해 보자.  
A, B가 최초로 통신할때 `3`을 주고받는 방법은 최초의 통신을 누군가 가로챌 수 있다는 위험이 있고, 통신을 하려는 두 사람이 직접 만나 `3`을 사용하기로 하는것은 현실적으로 맞지 않는다.  
둘만이 공유하는 비밀을 가지는 방법으로는 `디피-헬먼 키 교환`이 있다.   

### 디피-헬먼 키 교환
1. A, B가 통신을 시작한다.  
    - 둘은 `%11`과 `2`라는 정보를 이용하기로 약속한다.
    - `%11`과 `2`는 누구나 열람할 수 있는 정보이다.
2. A가 자신만의 수 `8`을 정한다.
3. B가 자신만의 수 `9`를 정한다.
4. A가 B에게 `2^8%11`의 값인 `3`을 보낸다.
    - `3`은 누구나 볼 수 있는 정보이다.
5. B가 `3`을 받아 `3^9%11`을 하여 `4`라는 값을 갖는다.
6. B가 A에게 `2^9%11`의 값인 `6`을 보낸다.
    - `6`은 누구나 볼 수 있는 정보이다.
7. B가 `6`을 받아 `6^8%11`을 하여 `4`라는 값을 갖는다.

노출된 정보는 `%11`, `2`, `3`, `6`뿐인데 A, B는 `4`라는 공유하는 비밀을 갖게 되었다.  
(원리는 잘 모르겠고 그냥 '이런 방식으로 공유하는 비밀을 가질수 있구나' 하는 정도만 알자. 추가로 `%`연산을 위한 수는 소수여야하고 처음 계산에서 밑으로 들어가는 수는 소수에 대해 원시근이어야 한다)  
<br/>

## 인증에 사용되는 공개키 암호화
서버는 전달 받는 메시지를 이용해 해당 인원이 누구인지 알수 있다. 그런데 메시지를 조작하여 보내면 A가 아닌 사람이 A인척 메시지를 보낼 수 있다.  
메시지를 조작할 수 없도록 내가 A라는것을 검증할 수 있는 방법으로, 서버에 넘겨줄 `공개키`와 `공개키`로 암호화 한 정보를 해독할 수 있는 `개인키`를 만든 후 `공개키`를 서버에 넘겨주고 해독을 시켜보라고 하는 방법이 있다.  
이러한 일을하는 방법으로 `rsa알고리즘`이 있다.

### rsa알고리즘

1. A가 다음의 방법으로 서버에게 보낼 `공개키`와 해당 `공개키`로 암호화 한 것을 해독할 수 있는 `비밀키`를 만든다.
    1. 두개의 소수 `17`, `11`을 선택한다.
    2. 둘을 곱해 `187`이라는 값을 갖는다.
    3. (`17`-1)*(`11`-1)을 하여 `160`을 갖는다
    4. 1 &lt; e &lt; `160`이면서 `160`과 서로소인 값 중 하나인 `7`을 정한다.
    5. `공개키`는 &lt;`187`, `7`&gt;이다
    6. `7`*𝒳%`160` = 1을 만족하는 수 𝒳인 `23`을 구한다.
    7. `개인키`는 &lt;`187`, `23`&gt;이다
2. 서버에게 내가 A라고 말하며 `공개키` &lt;`187`, `7`&gt;를 넘겨준다.
3. 이후 A가 서버에게 통신하고 싶다고 요청하면 서버는 `공개키`&lt;`187`, `7`&gt;를 이용하여 `88`이라는 숫자를 `88^7%187`의 방법으로 암호화 한 값인 `11`을 해독하여 보내라고 한다.
4. A는 `개인키`&lt;`187`, `23`&gt;를 이용하여 `11^23%187`의 값인 `88`로 해독하여 서버에게 보낸다.  
<br/>

### github에서 사용하는 rsa
github에서 로그인을 한 후 계정에 `공개키`를 미리 설정해 둔다. 이후 `push`를 하면 서버는 `공개키`를 이용하여 암호화 한 정보 보내주고 클라이언트는 `개인키`를 이용하여 이를 해독하여 github에게 보내준다. 그러면 github는 해당 `push`요청이 올바른 사용자로 부터 왔다는 것을 알 수 있다.

  